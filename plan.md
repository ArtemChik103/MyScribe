# Детальный план улучшения MyScribe (только UI/UX)

## Краткое резюме
Цель: улучшить пользовательский путь от загрузки изображения до редактирования и сохранения текста, сократив количество шагов и повысив предсказуемость интерфейса.
Стратегия: сначала cleanup клиентского интерфейса и техдолга, затем улучшение OCR-цикла на уровне UX-состояний, после этого оптимизация экранов документов и домашнего списка.

## 1. Scope и целевые метрики

### In scope
1. Клиентский UX распознавания и редактирования (`myscribe_app/lib/ui/screens/*`).
2. Состояния UI и обработка ошибок в пользовательском потоке.
3. UX-тесты (widget/e2e) для ключевых экранов.

### Out of scope
1. Улучшение качества OCR-модели и пайплайна распознавания.
2. Изменения серверных схем и форматов экспорта.
3. Полный архитектурный рефакторинг клиента.

### KPI релиза
1. Меньше шагов до сохранения исправленного текста.
2. Прозрачные статусы на каждом этапе пользовательского потока.
3. Отсутствие тупиковых состояний при сетевых и серверных ошибках.

## 2. Phase A — Cleanup UI и консистентность (1 итерация)

### Задачи
1. Удалить legacy TFLite-след в клиенте:
- убрать `_loadCustomModel` и кнопку загрузки модели в `lib/ui/screens/home_screen.dart`;
- удалить `loadModel()` в `lib/services/ocr_service.dart`;
- убрать неактуальные TFLite-константы из `lib/utils/constants.dart`.

2. Закрыть техдолг Flutter:
- заменить deprecated `Share.shareXFiles` на `SharePlus.instance.share`;
- заменить `withOpacity` на `withValues`;
- убрать прод-`print` в пользу `debugPrint`/логгера.

### Acceptance criteria
1. В UI нет следов client-side `.tflite` загрузки.
2. `flutter analyze` без deprecated-предупреждений по затронутым местам.
3. Базовый пользовательский сценарий в приложении проходит без регрессий.

## 3. Phase B — UX/UI OCR-цикла (2 итерации)

### B1. Поток распознавания
1. Ввести состояния:
- Uploading;
- Detecting;
- Recognizing;
- Done/Error.
2. Для ошибок показывать понятное сообщение и `Retry`.

### B2. Экран документа
1. Ускорить correction-flow:
- меньше модальных шагов;
- понятный статус "сохранено локально/отправлено".
2. Добавить статус "требует проверки".
3. Быстрые действия: `copy`, `share`, `re-run OCR`.

### B3. Домашний экран
1. Поиск по тексту.
2. Фильтры по дате/статусу.
3. Базовые массовые операции: удаление и экспорт.

### Acceptance criteria
1. Полный пользовательский путь проходит без тупиков.
2. Сетевые сбои переводят сценарий в recoverable state.
3. Пользователь понимает текущий статус документа без дополнительных действий.

## 4. Тест-план (UI/UX)

### Flutter
1. Widget: HomeScreen states, DocumentDetail edit/correction states.
2. Service/UI: корректный парсинг ошибок и отображение retry-состояний.
3. E2E smoke: pick -> OCR -> edit -> save -> reopen.

## 5. Порядок поставки
1. Milestone 1: UI cleanup + устранение deprecated.
2. Milestone 2: UX OCR/correction flow.
3. Milestone 3: HomeScreen search/filter/bulk-actions + стабилизация.

## 6. Риски и меры
1. Перегруженный интерфейс из-за новых статусов и действий:
- вводить изменения поэтапно и проверять читаемость на widget-тестах.
2. Регресс сценариев после cleanup:
- добавить smoke e2e для основных пользовательских потоков.
3. Непонятная обработка ошибок для пользователя:
- унифицировать тексты ошибок и действия восстановления (`Retry`, повторная отправка).

## 7. Допущения и defaults
1. OCR остаётся серверным, без изменений модели.
2. Приоритет релиза: UX редактирования и управления документами.
3. Rollback baseline уже запушен.
